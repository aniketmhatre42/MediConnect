{"ast":null,"code":"/**\r\n * Utility functions for authentication\r\n */\n\n/**\r\n * Check if user is logged in by examining session and local storage\r\n * @returns {Object|null} User object if logged in, null if not\r\n */\nexport const getLoggedInUser = () => {\n  // Check if this is a regular user (face auth or email login)\n  const authenticated = sessionStorage.getItem('authenticated') === 'true';\n  const userId = sessionStorage.getItem('userId');\n  const username = sessionStorage.getItem('username');\n  const loginMethod = sessionStorage.getItem('loginMethod');\n\n  // For face auth or regular user login\n  if (authenticated && userId && username) {\n    return {\n      id: userId,\n      role: 'user',\n      username: username,\n      loginMethod: loginMethod || 'unknown'\n    };\n  }\n\n  // If specifically looking for an Asha Worker login\n  if (userId && sessionStorage.getItem('userRole') === 'ashaWorker') {\n    return {\n      id: userId,\n      role: 'ashaWorker',\n      username: sessionStorage.getItem('workerName') || sessionStorage.getItem('userEmail') || 'Asha Worker'\n    };\n  }\n\n  // Check local storage as fallback (for persistent auth)\n  try {\n    const localUser = localStorage.getItem('user');\n    if (localUser) {\n      var _userData$email;\n      const userData = JSON.parse(localUser);\n      return {\n        id: userData.id || userData.userId,\n        username: userData.username || ((_userData$email = userData.email) === null || _userData$email === void 0 ? void 0 : _userData$email.split('@')[0]) || 'User',\n        role: userData.role || 'user'\n      };\n    }\n  } catch (error) {\n    console.error(\"Error parsing user data from localStorage:\", error);\n  }\n  return null;\n};\n\n/**\r\n * Check if user is authenticated\r\n * @returns {boolean} True if user is logged in\r\n */\nexport const isAuthenticated = () => {\n  return getLoggedInUser() !== null;\n};\n\n/**\r\n * Check if user is authenticated as an Asha worker\r\n * @returns {boolean} True if logged in as an Asha worker\r\n */\nexport const isAshaWorker = () => {\n  const user = getLoggedInUser();\n  return user !== null && user.role === 'ashaWorker';\n};\n\n/**\r\n * Get the current user's display name\r\n * @returns {string} Username or default text if not logged in\r\n */\nexport const getDisplayName = () => {\n  const user = getLoggedInUser();\n  return user ? user.username : 'Guest';\n};\n\n/**\r\n * Log out the current user by clearing session and local storage\r\n */\nexport const logoutUser = () => {\n  // Clear session storage\n  sessionStorage.removeItem('authenticated');\n  sessionStorage.removeItem('userId');\n  sessionStorage.removeItem('username');\n  sessionStorage.removeItem('userEmail');\n  sessionStorage.removeItem('loginMethod');\n  sessionStorage.removeItem('loginTime');\n  sessionStorage.removeItem('userRole');\n  sessionStorage.removeItem('workerName');\n  sessionStorage.removeItem('workerDistrict');\n\n  // Clear localStorage data\n  localStorage.removeItem('user');\n\n  // Return true to indicate successful logout\n  return true;\n};","map":{"version":3,"names":["getLoggedInUser","authenticated","sessionStorage","getItem","userId","username","loginMethod","id","role","localUser","localStorage","_userData$email","userData","JSON","parse","email","split","error","console","isAuthenticated","isAshaWorker","user","getDisplayName","logoutUser","removeItem"],"sources":["D:/Movies/Aniket/test2/test/src/utils/authUtils.js"],"sourcesContent":["/**\r\n * Utility functions for authentication\r\n */\r\n\r\n/**\r\n * Check if user is logged in by examining session and local storage\r\n * @returns {Object|null} User object if logged in, null if not\r\n */\r\nexport const getLoggedInUser = () => {\r\n  // Check if this is a regular user (face auth or email login)\r\n  const authenticated = sessionStorage.getItem('authenticated') === 'true';\r\n  const userId = sessionStorage.getItem('userId');\r\n  const username = sessionStorage.getItem('username');\r\n  const loginMethod = sessionStorage.getItem('loginMethod');\r\n  \r\n  // For face auth or regular user login\r\n  if (authenticated && userId && username) {\r\n    return {\r\n      id: userId,\r\n      role: 'user',\r\n      username: username,\r\n      loginMethod: loginMethod || 'unknown'\r\n    };\r\n  }\r\n  \r\n  // If specifically looking for an Asha Worker login\r\n  if (userId && sessionStorage.getItem('userRole') === 'ashaWorker') {\r\n    return {\r\n      id: userId,\r\n      role: 'ashaWorker',\r\n      username: sessionStorage.getItem('workerName') || \r\n               sessionStorage.getItem('userEmail') || \r\n               'Asha Worker'\r\n    };\r\n  }\r\n\r\n  // Check local storage as fallback (for persistent auth)\r\n  try {\r\n    const localUser = localStorage.getItem('user');\r\n    if (localUser) {\r\n      const userData = JSON.parse(localUser);\r\n      return {\r\n        id: userData.id || userData.userId,\r\n        username: userData.username || userData.email?.split('@')[0] || 'User',\r\n        role: userData.role || 'user'\r\n      };\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error parsing user data from localStorage:\", error);\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Check if user is authenticated\r\n * @returns {boolean} True if user is logged in\r\n */\r\nexport const isAuthenticated = () => {\r\n  return getLoggedInUser() !== null;\r\n};\r\n\r\n/**\r\n * Check if user is authenticated as an Asha worker\r\n * @returns {boolean} True if logged in as an Asha worker\r\n */\r\nexport const isAshaWorker = () => {\r\n  const user = getLoggedInUser();\r\n  return user !== null && user.role === 'ashaWorker';\r\n};\r\n\r\n/**\r\n * Get the current user's display name\r\n * @returns {string} Username or default text if not logged in\r\n */\r\nexport const getDisplayName = () => {\r\n  const user = getLoggedInUser();\r\n  return user ? user.username : 'Guest';\r\n};\r\n\r\n/**\r\n * Log out the current user by clearing session and local storage\r\n */\r\nexport const logoutUser = () => {\r\n  // Clear session storage\r\n  sessionStorage.removeItem('authenticated');\r\n  sessionStorage.removeItem('userId');\r\n  sessionStorage.removeItem('username');\r\n  sessionStorage.removeItem('userEmail');\r\n  sessionStorage.removeItem('loginMethod');\r\n  sessionStorage.removeItem('loginTime');\r\n  sessionStorage.removeItem('userRole');\r\n  sessionStorage.removeItem('workerName');\r\n  sessionStorage.removeItem('workerDistrict');\r\n  \r\n  // Clear localStorage data\r\n  localStorage.removeItem('user');\r\n  \r\n  // Return true to indicate successful logout\r\n  return true;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}